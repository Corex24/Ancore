var _0x48ab=["fs","readFileSync","writeFileSync","unlinkSync","os","tmpdir","path","join","fluent-ffmpeg","sharp","file-type","fromBuffer","crypto","randomUUID","application/octet-stream","bin"];import{readFileSync as _0x2163d8,writeFileSync as _0x5de9e4,unlinkSync as _0x37d771}from _0x48ab[0];import{tmpdir as _0x12fcbc}from _0x48ab[4];import{join as _0x5423d6}from _0x48ab[6];import _0x114cd3 from _0x48ab[8];import _0x5b6cb8 from _0x48ab[9];import{fromBuffer as _0x3d4457}from _0x48ab[10];import{randomUUID as _0x2c4df3}from _0x48ab[12];const tempPath=_0x401174=>(0,_0x5423d6)((0,_0x12fcbc)(),`${Date.now()}-${_0x2c4df3()}${_0x401174}`);export async function toMP3(_0x4d39aa){const _0x236e45=tempPath('.ogg'),_0x3c8494=tempPath('.mp3');_0x5de9e4(_0x236e45,_0x4d39aa);return new Promise((_0x225f6d,_0x496f13)=>{(0,_0x114cd3)(_0x236e45).audioCodec('libmp3lame').save(_0x3c8494).on('end',()=>{const _0x1a1a24=_0x2163d8(_0x3c8494);_0x37d771(_0x236e45),_0x37d771(_0x3c8494),_0x225f6d(_0x1a1a24)}).on('error',_0x496f13)});}export async function toWebp(_0x2b0e30){return await(0,_0x5b6cb8)(_0x2b0e30).resize(512,512,{fit:'cover'}).webp({quality:90}).toBuffer()}export async function resizeImage(_0x278881,_0x5cc6ec=512,_0x264768=512){return await(0,_0x5b6cb8)(_0x278881).resize(_0x5cc6ec,_0x264768).toBuffer()}export async function detectFile(_0x3b378d){const _0x391c99=await _0x3d4457(_0x3b378d);return _0x391c99||{mime:_0x48ab[14],ext:_0x48ab[15]};}
